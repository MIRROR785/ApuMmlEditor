<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<title>ApuMmlEditor</title>
<script src="Audio/AudioConst.js"></script>
<script src="Audio/AudioDevice.js"></script>
<script src="Device/NoiseDevice.js"></script>
<script src="Device/PulseDevice.js"></script>
<script src="Device/TriangleDevice.js"></script>
<script src="Audio/PseudoApu.js"></script>
<script src="Audio/AudioUnit.js"></script>
<script src="Audio/AudioMixer.js"></script>
<script src="Audio/AudioPacker.js"></script>
<script src="Mml/MmlConst.js"></script>
<script src="Mml/MmlContainer.js"></script>
<script src="Mml/MmlSequencer.js"></script>
<script src="ApuMmlPlayer.js"></script>
<link rel="stylesheet" href="ApuMmlEditor.css">
<script src="ApuMmlEditor.js"></script>
</head>
<body>
<header>
<h1><a href='https://github.com/MIRROR785/ApuMmlEditor/'>ApuMmlEditor</a></h1>
</header>
<h2 id='memu-mml'>MML</h2>
<section id='mml'>
<textarea id='mml-editor' class='editor' spellcheck='false'>
#Title ICE BALLER - Penguin
#Composer Alma
#Arranger @MIRROR_
TR0 t120
TR1 l8 Lo6rgggggab>c<afarab>cd<gr>frfede<g>cerrrrr<gggggab>c<a>cfrfffggggggggfffeerrr
TR2 l8 Lo4cc<g>ccc<g>cffcfffcfgbb>ddd<bgcc<g>ccc<g>ccc<g>ccc<g>cffffg+g+g+g+ggb>d<ggb>d<ccefffed
TR3 l8 Lo6reeeeefgafcfrfgabdr>drdc<b>c<da>crrrrr<eeeeefgafa>crcccdededef<b>c<gb>ccc<ba
</textarea>
<div>
<button id='play-start'>Play</button>
<button id='mml-clear'>Clear</button>
</div>
<article id='config-view'>
<fieldset class='inline'>
	<legend>Master</legend>
	<span class='inline'>
		<label for='master-volume'>Volume</label>
		<select id='master-volume' name='master-volume'>
			<option value='0'>--</option>
			<option value='0.2'>1</option>
			<option value='0.4'>2</option>
			<option value='0.6'>3</option>
			<option value='0.8'>4</option>
			<option value='1.0'>5</option>
			<option value='1.2'>6</option>
			<option value='1.4'>7</option>
			<option value='1.6'>8</option>
			<option value='1.8'>9</option>
			<option value='2.0'>10</option>
		</select>
	</span>
	<span class='inline'>
		<label for='master-loop'>Loop</label>
		<select id='master-loop' name='master-loop'>
			<option value='0'>--</option>
			<option>1</option>
			<option>2</option>
		</select>
	</span>
</fieldset>
<span class='inline'>
<fieldset class='inline'>
	<legend>Track1</legend>
	<label for='track1-voice'>Voice</label>
	<select id='track1-voice' name='track1-voice'>
		<option value='-1'>-----</option>
		<option value='0'>0:&nbsp;Duty12.5%</option>
		<option value='1'>1:&nbsp;Duty25%</option>
		<option value='2'>2:&nbsp;Duty50%</option>
		<option value='3'>3:&nbsp;Duty75%</option>
	</select>
</fieldset>
<fieldset class='inline'>
	<legend>Track2</legend>
	<label for='track2-voice'>Voice</label>
	<select id='track2-voice' name='track2-voice'>
		<option value='-1'>-----</option>
		<option value='0'>0:&nbsp;Duty12.5%</option>
		<option value='1'>1:&nbsp;Duty25%</option>
		<option value='2'>2:&nbsp;Duty50%</option>
		<option value='3'>3:&nbsp;Duty75%</option>
	</select>
</fieldset>
</span>
</article>
</section>
<h2 id='memu-mini-keyboard'>Mini keyboard</h2>
<section id='mini-keyboard'>
<fieldset class='inline'>
	<legend>Audio</legend>
	<span class='inline'>
		<label for='audio-device'>Device</label>
		<select id='audio-device' name='audio-device'>
			<option value='-1'>-----</option>
			<option value='0'>Pulse</option>
			<option value='1'>Triangle</option>
			<option value='2'>Noise</option>
		</select>
	</span>
	<span class='inline'>
		<label for='audio-voice'>Voice</label>
		<select id='audio-voice' name='audio-voice'>
			<option value='-1'>-----</option>
			<option value='0'>0:&nbsp;Duty12.5%</option>
			<option value='1'>1:&nbsp;Duty25%</option>
			<option value='2'>2:&nbsp;Duty50%</option>
			<option value='3'>3:&nbsp;Duty75%</option>
		</select>
	</span>
	<span class='inline'>
		<label for='audio-tempo'>Tempo</label>
		<input id='audio-tempo' type='number' min='1' max='360'/>
	</span>
	<span class='inline'>
		<label for='audio-volume'>Volume</label>
		<select id='audio-volume' name='audio-volume'>
			<option value='0'>--</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
			<option>6</option>
			<option>7</option>
			<option>8</option>
			<option>9</option>
			<option>10</option>
			<option>11</option>
			<option>12</option>
			<option>13</option>
			<option>14</option>
			<option>15</option>
		</select>
	</span>
	<span class='inline'>
		<label for='audio-octave'>Octave</label>
		<select id='audio-octave' name='audio-octave'>
			<option value='0'>--</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
			<option>6</option>
			<option>7</option>
			<option>8</option>
			<option>9</option>
		</select>
	</span>
	<span class='inline'>
		<label for='audio-length'>Length</label>
		<select id='audio-length' name='audio-length'>
			<option value='0'>--</option>
			<option>1</option>
			<option>2</option>
			<option>4</option>
			<option>8</option>
			<option>16</option>
			<option>32</option>
		</select>
	</span>
</fieldset>
<fieldset class='inline'>
	<legend>Current</legend>
	<span class='inline'>
		<label for='current-volume'>Volume</label>
		<select id='current-volume' name='current-volume'>
			<option value='0'>--</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
			<option>6</option>
			<option>7</option>
			<option>8</option>
			<option>9</option>
			<option>10</option>
			<option>11</option>
			<option>12</option>
			<option>13</option>
			<option>14</option>
			<option>15</option>
		</select>
	</span>
	<span class='inline'>
		<label for='current-octave'>Octave</label>
		<select id='current-octave' name='current-octave'>
			<option value='0'>--</option>
			<option>1</option>
			<option>2</option>
			<option>3</option>
			<option>4</option>
			<option>5</option>
			<option>6</option>
			<option>7</option>
			<option>8</option>
			<option>9</option>
		</select>
	</span>
	<span class='inline'>
		<label for='current-length'>Length</label>
		<select id='current-length' name='current-length'>
			<option value='0'>--</option>
			<option>1</option>
			<option>2</option>
			<option>4</option>
			<option>8</option>
			<option>16</option>
			<option>32</option>
		</select>
	</span>
	<input type='checkbox' id='key-mute'><label for='key-mute'>Mute</label>
	<button class='key-ctrl' id='key-clear'>Clear</button>
</fieldset>

<div id='track-view'>
	<div id='track-tiny-editor'>
		<span id='track-content-top' class='track-content'></span><span id='track-content-caret' class='track-content'>&nbsp;</span><span id='track-content-selection' class='track-content'></span><span id='track-content-bottom' class='track-content'></span>
	</div>
	<textarea id='track-text-editor' spellcheck='false'></textarea>
</div>
<div id='keyboard-view'>
	<div class='keyboard'>
		<div>
			<button class='key-updown' id='key-volume-down'>(<div class='key-assign'>[1]</div></button>
			<button class='key-sharp key-cs' id='key-cs1'>C#<div class='key-assign'>[2]</div></button>
			<button class='key-sharp key-ds' id='key-ds1'>D#<div class='key-assign'>[3]</div></button>
			<button class='key-sharp key-fs' id='key-fs1'>F#<div class='key-assign'>[5]</div></button>
			<button class='key-sharp key-gs' id='key-gs1'>G#<div class='key-assign'>[6]</div></button>
			<button class='key-sharp key-as' id='key-as1'>A#<div class='key-assign'>[7]</div></button>
			<button class='key-updown' id='key-volume-up'>)<div class='key-assign'>[9]</div></button>
		</div>
		<div>
			<button class='key-scale key-c' id='key-c1'>C<div class='key-assign'>[Q]</div></button>
			<button class='key-scale key-d' id='key-d1'>D<div class='key-assign'>[W]</div></button>
			<button class='key-scale key-e' id='key-e1'>E<div class='key-assign'>[E]</div></button>
			<button class='key-scale key-f' id='key-f1'>F<div class='key-assign'>[R]</div></button>
			<button class='key-scale key-g' id='key-g1'>G<div class='key-assign'>[T]</div></button>
			<button class='key-scale key-a' id='key-a1'>A<div class='key-assign'>[Y]</div></button>
			<button class='key-scale key-b' id='key-b1'>B<div class='key-assign'>[U]</div></button>
			<button class='key-scale key-uc' id='key-uc1'>C<div class='key-assign'>[I]</div></button>
		</div>
	</div>
	<div class='keyboard'>
		<div>
			<button class='key-updown' id='key-octave-down'>&lt;<div class='key-assign'>[A]</div></button>
			<button class='key-sharp key-cs' id='key-cs0'>C#<div class='key-assign'>[S]</div></button>
			<button class='key-sharp key-ds' id='key-ds0'>D#<div class='key-assign'>[D]</div></button>
			<button class='key-sharp key-fs' id='key-fs0'>F#<div class='key-assign'>[G]</div></button>
			<button class='key-sharp key-gs' id='key-gs0'>G#<div class='key-assign'>[H]</div></button>
			<button class='key-sharp key-as' id='key-as0'>A#<div class='key-assign'>[J]</div></button>
			<button class='key-updown' id='key-octave-up'>&gt;<div class='key-assign'>[L]</div></button>
		</div>
		<div>
			<button class='key-scale key-c' id='key-c0'>C<div class='key-assign'>[Z]</div></button>
			<button class='key-scale key-d' id='key-d0'>D<div class='key-assign'>[X]</div></button>
			<button class='key-scale key-e' id='key-e0'>E<div class='key-assign'>[C]</div></button>
			<button class='key-scale key-f' id='key-f0'>F<div class='key-assign'>[V]</div></button>
			<button class='key-scale key-g' id='key-g0'>G<div class='key-assign'>[B]</div></button>
			<button class='key-scale key-a' id='key-a0'>A<div class='key-assign'>[N]</div></button>
			<button class='key-scale key-b' id='key-b0'>B<div class='key-assign'>[M]</div></button>
			<button class='key-scale key-uc' id='key-uc0'>C<div class='key-assign'>[,]</div></button>
		</div>
	</div>
	<div class='control'>
		<button class='key-ctrl' id='key-left'>&larr;</button>
		<button class='key-ctrl' id='key-up'>&uarr;</button>
		<button class='key-ctrl' id='key-down'>&darr;</button>
		<button class='key-ctrl' id='key-right'>&rarr;</button>
		<button class='key-ctrl' id='key-del'>DEL</button>
		<button class='key-ctrl' id='key-bs'>BS</button>
		<button class='key-ctrl' id='key-replay'>Replay<div class='key-assign'>[Enter]</div></button>
	</div>
</div>
</section>
<section id='progress'>
<svg
 xmlns="http://www.w3.org/2000/svg"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 id="vortex" class="vortex" width="2cm" height="2cm" viewBox="0 0 400 400">
<defs>
 <path id="vortex-fin" class="vortex" d="M-50,-86.6025 A100,100 0 1,1 -50,86.6025 100,100 0 0,0 -50,-86.6025Z" fill="#80808080">
  <animateMotion path="M0,0 L0,30 0,0" dur="3s" repeatCount="indefinite" />
  <animateTransform attributeName="transform" attributeType="XML" type="scale" values="0.8 0.8; 1 1; 0.8 0.8" dur="3s" repeatCount="indefinite" />
 </path>
</defs>
<g transform="translate(200,200)">
 <use xlink:href="#vortex-fin" transform="translate(200,200) rotate(0)" />
 <use xlink:href="#vortex-fin" transform="translate(200,200) rotate(120)" />
 <use xlink:href="#vortex-fin" transform="translate(200,200) rotate(240)" />
 <animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 200,200" to="-360 200,200" dur="3s" repeatCount="indefinite" />
</g>
</svg>
</section>
<section id='message-box'>
<div id='icon-note-on'>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="note-on" viewBox="0 0 100 100">
<defs>
  <filter id="filter-drop-shadow" style="color-interpolation-filters:sRGB;">
    <feGaussianBlur stdDeviation="2 2" result="blur" />
  </filter>
  <g id="note4">
    <ellipse cx="0" cy="0" rx="4" ry="3"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <rect x="2" y="-15" width="1" height="15"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
  </g>
  <g id="note8">
    <ellipse cx="0" cy="0" rx="4" ry="3"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <rect x="2" y="-15" width="1" height="15"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <path d="m 2,-16 c 0.32525,0.36033 0.65513,0.71625 0.9633,1.09893 0.34943,0.45939 0.74763,0.87216 1.16826,1.23103 0.31087,0.32334 0.61516,0.63641 0.96017,0.90246 0.25666,0.2573 0.51712,0.49382 0.83428,0.6194 0.31137,0.0948 0.63421,0.0953 0.95297,0.0995 0.33612,0.001 0.67225,-0.002 1.00837,-0.004 0.0532,-0.0133 0.1077,-0.0205 0.15966,-0.0399 0.10973,-0.041 0.21227,-0.10736 0.32093,-0.15246 0.16588,-0.0688 0.32517,-0.10644 0.48375,-0.19912 0.0469,-0.0233 0.0937,-0.0466 0.14062,-0.0699 0,0 -1.95375,1.88708 -1.95375,1.88708 v 0 c -0.0468,0.022 -0.0936,0.044 -0.14046,0.066 -0.33389,0.12172 -0.66364,0.29663 -1.01624,0.30152 -0.3375,0.002 -0.67505,0.006 -1.0125,-0.003 -0.33875,-0.0144 -0.68181,-0.0359 -1.00267,-0.18396 -0.31489,-0.16872 -0.58626,-0.41649 -0.85638,-0.67516 -0.34355,-0.27233 -0.63789,-0.61172 -0.95411,-0.92834 -0.421,-0.38771 -0.82707,-0.80479 -1.19193,-1.27128 -0.31108,-0.38407 -0.64693,-0.73842 -0.99097,-1.07683 0,0 2.1267,-1.6027 2.1267,-1.6027 z"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
  </g>
  <g id="note16x2">
    <ellipse cx="0" cy="0" rx="4" ry="3"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <rect x="2" y="-15" width="1" height="15"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <ellipse cx="12" cy="0" rx="4" ry="3"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <rect x="14" y="-15" width="1" height="15"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <rect x="2" y="-15" width="12" height="3"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
    <rect x="2" y="-11" width="12" height="3"
     style="fill:#999999;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
  </g>
  <g id="button-base">
    <ellipse cx="0" cy="0" rx="26" ry="9"
     style="fill:#e6e6e6;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
  </g>
  <g id="button-shadow">
    <ellipse cx="0" cy="0" rx="13" ry="4.5"
     style="fill:#b3b3b3;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1;filter:url(#filter-drop-shadow)" />
  </g>
  <g id="button">
    <ellipse cx="0" cy="0" rx="18" ry="6"
     style="fill:#cccccc;fill-opacity:1;stroke:#ffffff;stroke-width:0;stroke-miterlimit:4;stroke-dasharray:none;stroke-opacity:1" />
  </g>
</defs>
<g transform="translate(50,50)">
  <use xlink:href="#button-base" />
  <use xlink:href="#button-shadow">
    <animateTransform attributeName="transform" attributeType="XML" type="scale" values="1 1; 1.125 1.125; 1 1;" dur="1s" repeatCount="indefinite" />
  </use>
  <use xlink:href="#button">
    <animateMotion path="M0,-10 L0,0" dur="1s" calcMode="spline" keyTimes="0;1" keySplines="0.5,0 0.25,1" repeatCount="indefinite" />
  </use>
  <use xlink:href="#note4" transform="translate(-15,-12)">
    <animateMotion path="M0,0 L0,-10 Z" dur="1s" begin="0.375s" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.5,0 0.25,0.25;0.5,0 0.25,0.25" repeatCount="indefinite" />
  </use>
  <use xlink:href="#note8" transform="translate(-5,-12)">
    <animateMotion path="M0,0 L0,-9.5 Z" dur="1s" begin="0.625s" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.95,0 0.375,0.25;0.95,0 0.375,0.25" repeatCount="indefinite" />
  </use>
  <use xlink:href="#note16x2" transform="translate(5,-12)">
    <animateMotion path="M0,0 L0,-9 Z" dur="1s" begin="0.875s" calcMode="spline" keyTimes="0;0.5;1" keySplines="0.85,0 0.5,0.25;0.85,0 0.5,0.25" repeatCount="indefinite" />
  </use>
</g>
</svg>
</div>
<div id='message'></div>
</section>
<footer>
Copyright &copy; 2020 @MIRROR_
</footer>
</body>
</html>
